# append ~/.bin to PATH; ~/.bin is a symlink to ~./dotfiles/.bin
export PATH=~/.bin:$PATH
export GOPATH=$PROJECTS/go
export PATH="$GOPATH/bin:$PATH"
export ANDROID_HOME=$HOME/Library/Android/sdk
export ANDROID_NDK_HOME="/usr/local/share/android-ndk"
export PATH=$PATH:$ANDROID_HOME/tools
export PATH=$PATH:$ANDROID_HOME/platform-tools
# This should've been installed at /z following topics approach
if command -v brew >/dev/null 2>&1; then
	# Load rupa's z if installed
	[ -f $(brew --prefix)/etc/profile.d/z.sh ] && source $(brew --prefix)/etc/profile.d/z.sh
fi
if (( $+commands[yarn] ))
then
  export PATH="$PATH:`yarn global bin`"
fi
# This should've been installed at /nvm following topics approach
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh" # This loads nvm

# place this after nvm initialization!
autoload -U add-zsh-hook
load-nvmrc() {
  local node_version="$(nvm version)"
  local nvmrc_path="$(nvm_find_nvmrc)"

  if [ -n "$nvmrc_path" ]; then
    local nvmrc_node_version=$(nvm version "$(cat "${nvmrc_path}")")

    if [ "$nvmrc_node_version" = "N/A" ]; then
      nvm install
    elif [ "$nvmrc_node_version" != "$node_version" ]; then
      nvm use
    fi
  elif [ "$node_version" != "$(nvm version default)" ]; then
    echo "Reverting to nvm default version"
    nvm use default
  fi
}
add-zsh-hook chpwd load-nvmrc
load-nvmrc
PATH="$HOME/.fastlane/bin:$PATH"
LC_ALL=en_US.UTF-8
LANG=en_US.UTF-8
alias git-delete-local-merged="git branch -d `git branch --merged | grep -v '^*' | grep -v 'master' | tr -d '\n'`"
alias git-undo="git reset --soft HEAD^"
alias gca='git commit -a'
alias gac='git add -A && git commit -m'
alias glog="git log --graph --pretty=format:'%Cred%h%Creset %an: %s - %Creset %C(yellow)%d%Creset %Cgreen(%cr)%Creset' --abbrev-commit --date=relative"
alias gd='git diff --color | sed "s/^\([^-+ ]*\)[-+ ]/\\1/" | less -r'
alias gco.='git checkout -- .'
alias gclean!='grh . && gco -- . && git clean -df'
# Uses git's autocompletion for inner commands. Assumes an install of git's
# bash `git-completion` script at $completion below (this is where Homebrew
# tosses it, at least).
completion='$(brew --prefix)/share/zsh/site-functions/_git'

if test -f $completion
then
  source $completion
fi
